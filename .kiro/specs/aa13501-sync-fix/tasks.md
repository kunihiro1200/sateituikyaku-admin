# AA13501同期修正 - タスクリスト

## Phase 1: データベーススキーマの修正

- [x] 1.1 property_address カラムの追加
  - [x] 1.1.1 マイグレーションファイルを作成
  - [x] 1.1.2 マイグレーションを実行（ユーザーが実行）
  - [x] 1.1.3 カラムが追加されたことを確認

## Phase 2: カラムマッピング設定の修正

- [x] 2.1 column-mapping.json の修正
  - [x] 2.1.1 spreadsheetToDatabase セクションを修正
    - [x] `"不通": "unreachable_status"`に変更
    - [x] `"コメント": "comments"`を追加
  - [x] 2.1.2 databaseToSpreadsheet セクションを修正
    - [x] `"unreachable_status": "不通"`を追加
    - [x] `"property_address": "物件所在地"`を追加
    - [x] `"comments": "コメント"`を追加
  - [x] 2.1.3 JSONファイルの構文を確認

## Phase 3: ColumnMapper の修正

- [x] 3.1 mapToSheet() メソッドの修正
  - [x] 3.1.1 「不通」列の特殊処理を追加
  - [x] 3.1.2 コードレビュー

## Phase 4: データ同期の実行

- [x] 4.1 強制同期スクリプトの作成
  - [x] 4.1.1 force-sync-aa13501-from-sheet.ts を作成
  - [x] 4.1.2 スクリプトを実行
  - [x] 4.1.3 データが同期されたことを確認

- [x] 4.2 物件住所の個別同期
  - [x] 4.2.1 sync-aa13501-property-address.ts を作成
  - [x] 4.2.2 スクリプトを実行
  - [x] 4.2.3 物件住所が同期されたことを確認

- [x] 4.3 キャッシュのクリア
  - [x] 4.3.1 clear-aa13501-cache.ts を作成
  - [x] 4.3.2 スクリプトを実行

## Phase 5: ステアリングドキュメントの作成

- [x] 5.1 売主テーブルカラム定義の作成
  - [x] 5.1.1 seller-table-column-definition.md を作成
  - [x] 5.1.2 内容をレビュー

- [x] 5.2 カラムマッピング完全版の作成
  - [x] 5.2.1 seller-spreadsheet-column-mapping.md を作成
  - [x] 5.2.2 全カラムのマッピングを文書化

## Phase 6: テストと検証

- [x] 6.1 ユニットテスト
  - [x] 6.1.1 ColumnMapper.mapToSheet() のテスト
  - [x] 6.1.2 ColumnMapper.mapToDatabase() のテスト

- [x] 6.2 統合テスト
  - [x] 6.2.1 AA13501の同期テスト
  - [x] 6.2.2 逆同期テスト

- [x] 6.3 E2Eテスト
  - [x] 6.3.1 通話モードページでのテスト
  - [x] 6.3.2 売主詳細ページでのテスト

## Phase 7: 本番環境での動作確認

- [x] 7.1 本番環境での動作確認
  - [x] 7.1.1 AA13501の動作確認（ユーザー確認済み）
  - [x] 7.1.2 エラーログの確認

## 完了条件

- [x] すべてのタスクが完了している
- [x] AA13501の不通ステータスがスプレッドシートに同期される
- [x] AA13501の物件住所がスプレッドシートに同期される
- [x] AA13501のコメントがスプレッドシートに同期される
- [x] 双方向同期が正しく動作する
- [x] 後方互換性が保たれる
- [x] エラーログにエラーが記録されていない

---

**作成日**: 2026年1月30日  
**更新日**: 2026年1月30日  
**作成者**: Kiro AI  
**ステータス**: ✅ 完了

# Implementation Plan

- [x] 1. Backend: SellerServiceの拡張


  - SellerService.decryptSeller()関数を拡張して、全てのフィールドを正しくマッピングする
  - comments, visitDate, visitTime, visitAssignee, visitValuationAcquirer, valuationAssignee, phoneAssigneeフィールドを追加
  - _Requirements: 1.1, 1.2, 2.1, 2.2, 3.1, 4.1, 5.1, 6.1_



- [x] 2. Backend: キャッシュクリアAPIの実装
  - DELETE /api/cache/seller/:id エンドポイントを実装
  - CacheHelperを使用してキャッシュをクリア
  - エラーハンドリングを実装
  - _Requirements: 8.1, 8.2, 8.3_

- [x] 3. Frontend: loadAllData()関数の修正


  - キャッシュクリアAPIを呼び出す処理を追加
  - エラーハンドリングを実装（キャッシュクリア失敗時も続行）
  - データ取得後の状態設定を確認
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_


- [x] 4. Frontend: 売主基本情報セクションの修正
  - 売主番号、反響日付、サイト情報の表示を確認
  - 氏名、住所、電話番号、メールアドレスの表示を確認
  - データが存在しない場合の表示を実装
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 5. Frontend: 物件情報セクションの修正
  - 物件住所、物件種別、土地面積、建物面積の表示を確認
  - 築年、構造、間取り、状況（売主）の表示を確認
  - 物件種別と状況（売主）の日本語ラベル変換を実装
  - 物件情報が存在しない場合の表示を実装
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 6. Frontend: 訪問予約情報セクションの修正
  - 訪問日時、担当者、訪問査定取得者の表示を確認
  - 訪問メモの表示を確認
  - 訪問統計の表示を確認
  - 担当者の表示名を正しく表示
  - 訪問予約が存在しない場合の表示を実装
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 7. Frontend: 査定情報セクションの修正
  - 査定額1、査定額2、査定額3の万円単位表示を確認
  - 固定資産税路線価の表示を確認
  - 手入力/自動計算の区別表示を実装
  - 査定担当者の表示を確認
  - 査定額が未設定の場合の表示を実装
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 8. Frontend: ステータスと確度情報セクションの修正
  - 現在のステータスと確度の表示を確認
  - 次回電話日の表示を確認
  - 除外日と除外アクションの表示を確認
  - 専任（他決）決定日の表示を確認
  - 競合情報と専任・他決要因の表示を確認
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 9. Frontend: スプレッドシートコメントセクションの実装
  - スプレッドシートコメントの表示セクションを追加
  - URLをクリック可能なリンクに変換する機能を実装
  - 長文コメントのスクロール表示を実装
  - コメントが存在しない場合の表示を実装
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 10. Frontend: AI要約へのコメント追加
  - AI要約生成時にスプレッドシートコメントを含める
  - コメントを要約の最初に追加
  - 要約生成中のローディング表示を確認
  - 要約生成失敗時のエラーハンドリングを確認
  - 要約生成後のバックグラウンド表示を確認
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 11. Checkpoint - 全てのテストが通ることを確認
  - Ensure all tests pass, ask the user if questions arise.

- [x] 12. 手動テスト: 通話モードページの表示確認
  - 全セクションにデータが表示されることを確認
  - スプレッドシートコメントが表示されることを確認
  - AI要約が表示されることを確認
  - URLがリンク化されることを確認
  - データが存在しない場合の表示を確認
  - _Requirements: 全て_

- [x] 13. 手動テスト: データ更新後の表示確認
  - データ更新後にページをリロードして最新データが表示されることを確認
  - キャッシュクリアが正しく動作することを確認
  - _Requirements: 8.1, 8.3, 8.4, 8.5_

# 要件定義書

## はじめに

売主管理システムにおいて、「売却意欲」フィールドを「確度」に名称変更する。これにより、ビジネス用語との整合性を高め、システム全体で一貫した用語を使用する。

## 用語集

- **システム**: 売主管理システム
- **確度**: 売主の売却意欲の高さを示す指標（A、B、B'、C、D、E、ダブり）
- **売却意欲**: 旧称のフィールド名（motivationまたはmotivation_level）
- **データベース**: PostgreSQLデータベース
- **フロントエンド**: Reactベースのユーザーインターフェース
- **バックエンド**: Node.js/TypeScriptベースのAPIサーバー

## 要件

### 要件1

**ユーザーストーリー:** 開発者として、コードベース全体で一貫した用語を使用したいので、「売却意欲」フィールドを「確度」に変更したい

#### 受入基準

1. WHEN データベーススキーマを確認する THEN システムは`confidence`カラムを使用する
2. WHEN フロントエンドコードを確認する THEN システムは`confidence`変数名とラベルを使用する
3. WHEN バックエンドコードを確認する THEN システムは`confidence`フィールド名を使用する
4. WHEN TypeScript型定義を確認する THEN システムは`confidence`プロパティ名を使用する
5. WHEN UIを表示する THEN システムは「確度」というラベルを表示する

### 要件2

**ユーザーストーリー:** ユーザーとして、既存のデータを失うことなくフィールド名が変更されることを期待するので、データ移行が正しく行われる必要がある

#### 受入基準

1. WHEN マイグレーションを実行する THEN システムは既存の`motivation`データを`confidence`に移行する
2. WHEN データ移行後にデータを確認する THEN システムは全てのレコードで値が保持されている
3. WHEN 古いフィールドを参照する THEN システムはエラーを返さずに新しいフィールドを使用する

### 要件3

**ユーザーストーリー:** 開発者として、APIの後方互換性を維持したいので、既存のクライアントが影響を受けないようにしたい

#### 受入基準

1. WHEN 古いフィールド名でAPIリクエストを送信する THEN システムは正常に処理する
2. WHEN APIレスポンスを受信する THEN システムは新しいフィールド名`confidence`を返す
3. WHEN ドキュメントを確認する THEN システムは新しいフィールド名を使用している

# 物件リスト 公開サイトボタン追加機能 - タスクリスト

## タスク概要

物件リストページのヘッダーに公開物件サイトへのアクセスボタンを2つ追加します。

---

## Phase 1: 基本機能の実装

### 1. PublicSiteButtonsコンポーネントの作成

- [ ] 1.1 `frontend/src/components/PublicSiteButtons.tsx`ファイルを作成
  - [ ] 1.1.1 Material-UIのコンポーネントをインポート（Box, Button）
  - [ ] 1.1.2 Material-UIのアイコンをインポート（PublicIcon, AdminPanelSettingsIcon）
  - [ ] 1.1.3 コンポーネントの基本構造を作成
  - [ ] 1.1.4 一般向け公開サイトボタンを実装
    - バリアント: `outlined`
    - カラー: `primary`
    - アイコン: `PublicIcon`
    - ラベル: 「一般向け公開サイト」
    - クリックハンドラー: `window.open('/public/properties', '_blank', 'noopener,noreferrer')`
  - [ ] 1.1.5 管理者向け公開サイトボタンを実装
    - バリアント: `contained`
    - カラー: `secondary`
    - アイコン: `AdminPanelSettingsIcon`
    - ラベル: 「管理者向け公開サイト」
    - クリックハンドラー: `window.open('/public/properties?canHide=true', '_blank', 'noopener,noreferrer')`
  - [ ] 1.1.6 `aria-label`属性を追加してアクセシビリティを向上
  - [ ] 1.1.7 `whiteSpace: 'nowrap'`を設定してラベルを1行に保つ

### 2. PropertyListingsPageへの統合

- [ ] 2.1 `frontend/src/pages/PropertyListingsPage.tsx`を修正
  - [ ] 2.1.1 `PublicSiteButtons`コンポーネントをインポート
  - [ ] 2.1.2 ヘッダー部分のレイアウトを修正
    - 「物件リスト」タイトルと`PublicSiteButtons`を横並びに配置
    - `display: 'flex'`, `justifyContent: 'space-between'`, `alignItems: 'center'`を使用
  - [ ] 2.1.3 既存の`PageNavigation`コンポーネントの位置を維持

---

## Phase 2: レスポンシブ対応

### 3. レスポンシブデザインの実装

- [ ] 3.1 `PublicSiteButtons.tsx`にレスポンシブスタイルを追加
  - [ ] 3.1.1 Boxコンポーネントに`flexDirection`を設定
    - デスクトップ（sm以上）: `row`（横並び）
    - モバイル（xs）: `column`（縦並び）
  - [ ] 3.1.2 Boxコンポーネントに`alignItems`を設定
    - デスクトップ（sm以上）: `center`
    - モバイル（xs）: `stretch`（幅いっぱい）
  - [ ] 3.1.3 `gap: 2`を設定してボタン間のスペースを確保

- [ ] 3.2 `PropertyListingsPage.tsx`のヘッダーレイアウトをレスポンシブ対応
  - [ ] 3.2.1 モバイル表示でタイトルとボタンが縦並びになるように調整
  - [ ] 3.2.2 必要に応じて`flexDirection`を`{ xs: 'column', sm: 'row' }`に設定

---

## Phase 3: テスト

### 4. 単体テストの作成（オプション）

- [ ] 4.1 `frontend/src/components/PublicSiteButtons.test.tsx`ファイルを作成
  - [ ] 4.1.1 一般向け公開サイトボタンが表示されることをテスト
  - [ ] 4.1.2 管理者向け公開サイトボタンが表示されることをテスト
  - [ ] 4.1.3 一般向けボタンをクリックすると`window.open()`が呼ばれることをテスト
  - [ ] 4.1.4 管理者向けボタンをクリックすると`window.open()`が呼ばれることをテスト
  - [ ] 4.1.5 `window.open()`の引数が正しいことをテスト

### 5. E2Eテスト（手動）

- [ ] 5.1 デスクトップ表示での動作確認
  - [ ] 5.1.1 物件リストページを開く
  - [ ] 5.1.2 2つのボタンが横並びで表示されることを確認
  - [ ] 5.1.3 一般向けボタンをクリックして新しいタブで開くことを確認
  - [ ] 5.1.4 管理者向けボタンをクリックして新しいタブで開くことを確認
  - [ ] 5.1.5 公開サイトが正しく表示されることを確認

- [ ] 5.2 モバイル表示での動作確認
  - [ ] 5.2.1 ブラウザの開発者ツールでモバイル表示に切り替え
  - [ ] 5.2.2 2つのボタンが縦並びで表示されることを確認
  - [ ] 5.2.3 各ボタンをクリックして新しいタブで開くことを確認

- [ ] 5.3 アクセシビリティの確認
  - [ ] 5.3.1 キーボードのTabキーでボタンにフォーカスできることを確認
  - [ ] 5.3.2 EnterキーまたはSpaceキーでボタンを実行できることを確認
  - [ ] 5.3.3 スクリーンリーダーでボタンのラベルが読み上げられることを確認（オプション）

---

## Phase 4: ドキュメント更新

### 6. ドキュメントの更新

- [ ] 6.1 実装記録を作成
  - [ ] 6.1.1 `.kiro/steering/property-list-public-site-buttons-implementation.md`を作成
  - [ ] 6.1.2 実装の詳細、動作確認済みコミット、復元手順を記録

- [ ] 6.2 関連ドキュメントの更新
  - [ ] 6.2.1 必要に応じて他のドキュメントにリンクを追加

---

## Phase 5: デプロイと確認

### 7. デプロイ

- [ ] 7.1 ローカル環境での最終確認
  - [ ] 7.1.1 `npm run dev`でフロントエンドを起動
  - [ ] 7.1.2 全ての機能が正常に動作することを確認

- [ ] 7.2 本番環境へのデプロイ
  - [ ] 7.2.1 変更をコミット
  - [ ] 7.2.2 GitHubにプッシュ
  - [ ] 7.2.3 Vercelの自動デプロイを待つ

- [ ] 7.3 本番環境での動作確認
  - [ ] 7.3.1 本番環境で物件リストページを開く
  - [ ] 7.3.2 2つのボタンが表示されることを確認
  - [ ] 7.3.3 各ボタンをクリックして新しいタブで開くことを確認
  - [ ] 7.3.4 公開サイトが正しく表示されることを確認

---

## 完了条件

- [x] Phase 1: 基本機能の実装が完了
- [x] Phase 2: レスポンシブ対応が完了
- [ ] Phase 3: テストが完了（オプション）
- [ ] Phase 4: ドキュメント更新が完了
- [ ] Phase 5: デプロイと確認が完了

---

## 注意事項

### 既存機能への影響

- 既存の物件リストページの機能に影響を与えないこと
- 既存のレイアウトを大きく変更しないこと
- 既存のコンポーネント（`PublicUrlCell`など）は変更しないこと

### セキュリティ

- `window.open()`の第3引数に`noopener,noreferrer`を必ず指定すること
- 管理者向けサイトの機能は、公開サイト側で認証チェック済みであることを確認すること

### パフォーマンス

- 新規コンポーネントは静的なコンポーネント（状態なし）にすること
- 再レンダリングの影響を最小限にすること

---

## 関連ドキュメント

- [要件定義](./requirements.md)
- [設計書](./design.md)
- [公開物件サイト 手動更新ボタン実装記録](../../steering/public-property-manual-refresh-implementation.md)

---

**作成日**: 2026年1月25日  
**作成者**: Kiro AI Assistant  
**ステータス**: 実装待ち

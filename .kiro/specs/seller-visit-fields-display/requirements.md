# 訪問フィールド表示機能 - 要件定義

## 概要

売主詳細ページの「訪問査定予約」セクションに、スプレッドシートから同期された訪問関連フィールドを表示する機能を追加します。

## 背景

現在、「訪問査定予約」セクションには以下の機能があります：
- **新規予約作成フォーム**: Googleカレンダーと連携した予約作成
- **予約リスト**: 作成済みの予約一覧表示

しかし、スプレッドシートから同期された訪問関連の情報（訪問査定取得者、営担、訪問取得日、訪問日）が表示されていません。これらのフィールドはデータベースに保存されており、APIレスポンスにも含まれていますが、UIに表示されていない状態です。

## 要件

### R1: 訪問フィールドの表示

**優先度**: 高

売主詳細ページの「訪問査定予約」セクションに、以下の4つのフィールドを表示する：

| フィールド名 | データベースカラム | スプレッドシートカラム | 型 |
|------------|------------------|---------------------|-----|
| 訪問査定取得者 | visit_valuation_acquirer | 訪問査定取得者 | string |
| 営担 | visit_assignee | 営担 | string |
| 訪問取得日 | visit_acquisition_date | 訪問取得日\n年/月/日 | date |
| 訪問日 | visit_date | 訪問日 \nY/M/D | date |

**受け入れ基準**:
- 4つのフィールドがすべて表示される
- データが存在しない場合は「未設定」と表示される
- 日付フィールドは日本語形式（例: 2026/1/17）で表示される

### R2: データ取得

**優先度**: 高

売主詳細APIから訪問フィールドのデータを取得する。

**受け入れ基準**:
- `/api/sellers/:id` APIレスポンスに訪問フィールドが含まれている
- フィールドが存在しない場合は `null` または `undefined` が返される
- エラーが発生した場合は適切にハンドリングされる

### R3: UIレイアウト

**優先度**: 中

訪問フィールドは既存の予約機能の上部に表示し、視覚的に区別する。

**受け入れ基準**:
- 訪問フィールドセクションが「訪問査定予約」セクションの最上部に配置される
- 訪問フィールドと予約機能の間に区切り線（Divider）が表示される
- Gridレイアウトで2列表示（モバイルでは1列）
- 各フィールドはラベルと値が明確に区別される

### R4: スプレッドシート同期

**優先度**: 低（既存機能の確認）

訪問フィールドがスプレッドシートから正しく同期されることを確認する。

**受け入れ基準**:
- `EnhancedAutoSyncService` が訪問フィールドを同期している
- 正しいスプレッドシートカラム名を使用している（改行コード含む）
- データベースに正しく保存されている

### R5: カラム名の正確性

**優先度**: 高

スプレッドシートのカラム名は特殊文字（改行コード）を含むため、正確に使用する。

**受け入れ基準**:
- `訪問取得日\n年/月/日` を使用（`訪問取得日` ではない）
- `訪問日 \nY/M/D` を使用（`訪問日` ではない）
- `COMPLETE_COLUMN_MAPPING.md` に記載された正確なカラム名を使用

## 非機能要件

### パフォーマンス
- 訪問フィールドの表示は既存のAPIレスポンスを使用するため、追加のAPIコールは不要

### 保守性
- カラム名は `COMPLETE_COLUMN_MAPPING.md` を参照
- 将来的なカラム追加に対応できる構造

### ユーザビリティ
- データが存在しない場合も適切に表示される
- 日付は日本語形式で表示される

## 制約事項

- 既存の予約機能（新規予約作成フォーム、予約リスト）は変更しない
- APIエンドポイントは変更しない（既存のレスポンスを使用）
- データベーススキーマは変更しない（既存のカラムを使用）

## 成功基準

1. 訪問フィールドが売主詳細ページに表示される
2. データが存在する売主で正しい値が表示される
3. データが存在しない売主で「未設定」が表示される
4. 既存の予約機能が正常に動作する
5. モバイル表示でも適切にレイアウトされる

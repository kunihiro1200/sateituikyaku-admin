# 実装計画

- [x] 1. CallModePage コンポーネントの基本構造を作成


  - `frontend/src/pages/CallModePage.tsx` を作成
  - 基本的なレイアウト（左右2分割）を実装
  - ヘッダー（戻るボタン、タイトル）を実装
  - _要件: 1.2, 4.1, 4.2_



- [x] 2. データ取得ロジックを実装

  - 売主情報、物件情報、査定情報、活動履歴を取得
  - Promise.all で並列取得
  - ローディング状態の管理



  - エラーハンドリング
  - _要件: 1.3, 1.4_


- [ ] 3. 左側の情報表示エリアを実装
  - 物件情報セクション（最上部）


  - 売主情報セクション
  - 最新査定情報セクション
  - 過去の追客履歴セクション（AI要約）
  - スクロール可能なレイアウト


  - _要件: 2.1, 2.2, 2.3, 2.4, 2.5, 4.3_


- [ ] 4. 右側の通話メモ入力エリアを実装
  - よく使うフレーズボタン



  - 複数行テキストエリア
  - フレーズボタンクリック時の入力欄への追加機能
  - _要件: 3.1, 3.2, 3.3_




- [ ] 5. 過去の通話履歴表示を実装
  - 最新5件の通話メモを表示
  - 担当者イニシャルと日時の表示（既存のユーティリティ関数を使用）
  - スクロール可能なレイアウト



  - _要件: 3.4, 6.1, 6.2, 6.3, 6.4, 6.5_

- [ ] 6. 通話メモ保存機能を実装
  - 「保存して終了」ボタン
  - API呼び出し（既存の `/sellers/:id/activities` エンドポイントを使用）

  - 保存成功後に売主詳細ページに遷移
  - エラーハンドリング
  - _要件: 3.5_

- [ ] 7. ナビゲーション機能を実装
  - 戻るボタンの実装
  - 未保存データがある場合の確認ダイアログ

  - 売主詳細ページへの遷移
  - _要件: 1.5, 5.5_



- [ ] 8. キーボードショートカットを実装
  - Ctrl+S で保存
  - Esc で戻る（確認ダイアログ付き）
  - ページ読み込み時に通話メモ入力欄にフォーカス

  - _要件: なし（UX向上）_



- [x] 9. ルーティングを設定



  - `frontend/src/App.tsx` に新しいルートを追加






  - `/sellers/:id/call` パスを設定
  - _要件: 1.1_

- [ ] 10. 売主詳細ページの「通話メモ」ボタンを修正
  - ダイアログを開く代わりに通話専用ページに遷移
  - `navigate(/sellers/${id}/call)` を使用

  - _要件: 1.1_

- [ ] 11. スタイリングとレイアウトの調整
  - 左右50%ずつの固定幅
  - 最小画面幅1280pxの設定


  - スクロールバーのスタイリング
  - 余白とパディングの調整
  - _要件: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 12. エラーハンドリングの実装
  - データ取得エラー時の表示
  - 通話メモ保存エラー時の再試行機能
  - 無効な売主IDの処理
  - _要件: なし（エラーハンドリング）_

- [ ] 13. チェックポイント - すべての機能が動作することを確認
  - 売主詳細ページから通話専用ページに遷移できることを確認
  - 左側に物件情報、売主情報、査定情報が表示されることを確認
  - 右側に通話メモ入力欄と過去の履歴が表示されることを確認
  - 通話メモを保存して売主詳細ページに戻れることを確認
  - 問題があればユーザーに質問する

- [ ]* 14. ユニットテストを作成
  - CallModePage コンポーネントのテスト
  - データ取得ロジックのテスト
  - ナビゲーション機能のテスト
  - _要件: すべて_

- [ ]* 15. 統合テストを作成
  - エンドツーエンドフローのテスト
  - UI 表示テスト
  - _要件: すべて_

- [x] 16. 売主情報編集機能を実装



  - 売主情報セクションに編集ボタンを追加
  - 編集モードの状態管理（editingSeller）
  - 編集用の状態変数（editedName, editedAddress, editedPhoneNumber, editedEmail）
  - 編集モードのUIを実装（入力フィールド）
  - 保存ボタンとキャンセルボタンの実装
  - _要件: 7.1, 7.2, 7.3, 7.6_


- [ ] 17. 売主情報保存機能を実装
  - handleSaveSeller 関数を実装
  - バリデーション（必須項目チェック）
  - API呼び出し（PUT /sellers/:id）
  - 保存成功時の処理（編集モード終了、データ再読み込み）
  - エラーハンドリング



  - _要件: 7.4, 7.5, 7.7_

- [ ] 18. チェックポイント - 売主情報編集機能が動作することを確認
  - 編集ボタンをクリックして編集モードに切り替わることを確認
  - 入力フィールドに現在の値が表示されることを確認
  - 情報を変更して保存できることを確認
  - キャンセルボタンで編集内容が破棄されることを確認
  - 問題があればユーザーに質問する

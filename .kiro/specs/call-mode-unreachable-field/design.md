# é€šè©±ãƒ¢ãƒ¼ãƒ‰ã€Œä¸é€šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ æ©Ÿèƒ½ - è¨­è¨ˆæ›¸

## æ¦‚è¦

å£²ä¸»ãƒªã‚¹ãƒˆã®é€šè©±ãƒ¢ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€Œä¸é€šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã€é€šè©±ã®åˆ°é”çŠ¶æ³ã‚’ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®çŠ¶æ…‹ã«åŸºã¥ã„ã¦ã€å£²ä¸»ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è‡ªå‹•çš„ã«æ›´æ–°ã™ã‚‹ã€‚

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CallModePage.tsx                                 â”‚  â”‚
â”‚  â”‚  - é€šè©±ãƒ¢ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸                                 â”‚  â”‚
â”‚  â”‚  - ã€Œä¸é€šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¡¨ç¤ºãƒ»å…¥åŠ›                     â”‚  â”‚
â”‚  â”‚  - ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³UI                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PropertyListingsPage.tsx                         â”‚  â”‚
â”‚  â”‚  - å£²ä¸»ãƒªã‚¹ãƒˆã®è¡¨ç¤º                                 â”‚  â”‚
â”‚  â”‚  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚«ãƒ©ãƒ ã®è¡¨ç¤º                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  useSellerStatus.ts (ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯)                â”‚  â”‚
â”‚  â”‚  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯                            â”‚  â”‚
â”‚  â”‚  - ã€Œå½“æ—¥TELåˆ†_æœªç€æ‰‹ã€åˆ¤å®š                         â”‚  â”‚
â”‚  â”‚  - åéŸ¿æ—¥ä»˜ãƒã‚§ãƒƒã‚¯ï¼ˆ2026å¹´1æœˆ1æ—¥ä»¥é™ï¼‰              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SellerSyncService.ts                             â”‚  â”‚
â”‚  â”‚  - ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆåŒæœŸ                              â”‚  â”‚
â”‚  â”‚  - Jåˆ—ï¼ˆä¸é€šï¼‰ã®èª­ã¿æ›¸ã                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Google Sheets API                                â”‚  â”‚
â”‚  â”‚  - ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆID: 1wKBRLWbT6pSKa9IlTDabjhj... â”‚  â”‚
â”‚  â”‚  - Jåˆ—: ä¸é€š                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### Sellerå‹ã®æ‹¡å¼µ

```typescript
interface Seller {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  seller_number: string;
  name: string;
  // ... ãã®ä»–ã®æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—ã«å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  next_call_date: string | null;          // æ¬¡é›»æ—¥ (Dåˆ—)
  status: string | null;                   // çŠ¶æ³ï¼ˆå½“ç¤¾ï¼‰ (AHåˆ—)
  inquiry_date: string | null;             // åéŸ¿æ—¥ä»˜
  
  // æ–°è¦è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  unreachable_status: string | null;       // ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (Jåˆ—)
  // å¯èƒ½ãªå€¤: nullï¼ˆæœªå…¥åŠ›ï¼‰ã€'ä¸é€š'ã€'é€šé›»OK'
}
```

---

## UIè¨­è¨ˆ

### é€šè©±ãƒ¢ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã®ã€Œä¸é€šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

#### é…ç½®ä½ç½®
- ã€Œé€šè©±ãƒ¡ãƒ¢å…¥åŠ›ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å³éš£
- é€šè©±ãƒ¡ãƒ¢å…¥åŠ›ã‚¨ãƒªã‚¢ã¨åŒã˜é«˜ã•ã«é…ç½®

#### UIæ§‹é€ 

```typescript
// frontend/src/pages/CallModePage.tsx

<Box sx={{ display: 'flex', gap: 2, mb: 2 }}>
  {/* å·¦å´ï¼šé€šè©±ãƒ¡ãƒ¢å…¥åŠ› */}
  <Box sx={{ flex: 1 }}>
    <Typography variant="h6">ğŸ“ é€šè©±ãƒ¡ãƒ¢å…¥åŠ›</Typography>
    <TextField
      multiline
      rows={10}
      fullWidth
      value={callMemo}
      onChange={(e) => setCallMemo(e.target.value)}
    />
  </Box>

  {/* å³å´ï¼šä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */}
  <Box sx={{ width: '200px' }}>
    <Typography variant="h6" sx={{ mb: 1 }}>ğŸ“ ä¸é€š</Typography>
    <FormControl component="fieldset">
      <RadioGroup
        value={unreachableStatus || ''}
        onChange={(e) => setUnreachableStatus(e.target.value || null)}
      >
        <FormControlLabel 
          value="" 
          control={<Radio />} 
          label="æœªé¸æŠ" 
        />
        <FormControlLabel 
          value="ä¸é€š" 
          control={<Radio />} 
          label="ä¸é€š" 
        />
        <FormControlLabel 
          value="é€šé›»OK" 
          control={<Radio />} 
          label="é€šé›»OK" 
        />
      </RadioGroup>
    </FormControl>
  </Box>
</Box>
```

#### ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

```typescript
// ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«
sx={{
  '& .MuiFormControlLabel-root': {
    marginBottom: 1,
  },
  '& .MuiRadio-root': {
    padding: '4px',
  },
  '& .MuiFormControlLabel-label': {
    fontSize: '14px',
  },
}}
```

---

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®æ‹¡å¼µ

### æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£

```typescript
// frontend/src/utils/sellerStatusUtils.ts

/**
 * å½“æ—¥TELï¼ˆæœªç€æ‰‹ï¼‰ã‹ã©ã†ã‹ã‚’åˆ¤å®š
 * æ¡ä»¶:
 * - æ¬¡é›»æ—¥ãŒä»Šæ—¥ã‚’å«ã‚ã¦éå»
 * - çŠ¶æ³ï¼ˆå½“ç¤¾ï¼‰ã«ã€Œè¿½å®¢ä¸­ã€ã‚’å«ã‚€
 * - ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæœªå…¥åŠ›ï¼ˆç©ºç™½ï¼‰
 * - é›»è©±æ‹…å½“ï¼ˆä»»æ„ï¼‰ãŒç©ºæ¬„
 * - åéŸ¿æ—¥ä»˜ãŒ2026å¹´1æœˆ1æ—¥ä»¥é™ â† æ–°è¦è¿½åŠ 
 * @param seller å£²ä¸»ãƒ‡ãƒ¼ã‚¿
 * @param today ä»Šæ—¥ã®æ—¥ä»˜
 * @returns å½“æ—¥TELï¼ˆæœªç€æ‰‹ï¼‰ã‹ã©ã†ã‹
 */
export function isCallTodayUnstarted(
  seller: Seller,
  today: Date
): boolean {
  // æ¬¡é›»æ—¥ãŒä»Šæ—¥ã‚’å«ã‚ã¦éå»ã‹ãƒã‚§ãƒƒã‚¯
  const nextCallDate = parseDate(seller.next_call_date);
  if (!nextCallDate || nextCallDate > today) {
    return false;
  }

  // çŠ¶æ³ï¼ˆå½“ç¤¾ï¼‰ã«ã€Œè¿½å®¢ä¸­ã€ã‚’å«ã‚€ã‹ãƒã‚§ãƒƒã‚¯
  if (!seller.status || !seller.status.includes('è¿½å®¢ä¸­')) {
    return false;
  }

  // ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæœªå…¥åŠ›ã‹ãƒã‚§ãƒƒã‚¯
  if (seller.unreachable_status && seller.unreachable_status.trim() !== '') {
    return false;
  }

  // é›»è©±æ‹…å½“ï¼ˆä»»æ„ï¼‰ãŒç©ºæ¬„ã‹ãƒã‚§ãƒƒã‚¯
  if (seller.phone_person && seller.phone_person.trim() !== '') {
    return false;
  }

  // åéŸ¿æ—¥ä»˜ãŒ2026å¹´1æœˆ1æ—¥ä»¥é™ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆæ–°è¦è¿½åŠ ï¼‰
  const inquiryDate = parseDate(seller.inquiry_date);
  if (!inquiryDate) {
    return false;
  }
  
  const cutoffDate = new Date(2026, 0, 1); // 2026å¹´1æœˆ1æ—¥
  cutoffDate.setHours(0, 0, 0, 0);
  
  if (inquiryDate < cutoffDate) {
    return false;
  }

  return true;
}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. é€šè©±ãƒ¢ãƒ¼ãƒ‰ã§ã®å…¥åŠ›

```typescript
// frontend/src/pages/CallModePage.tsx

// çŠ¶æ…‹ç®¡ç†
const [unreachableStatus, setUnreachableStatus] = useState<string | null>(null);

// ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿æ™‚
useEffect(() => {
  const loadSellerData = async () => {
    const response = await api.get(`/api/sellers/${id}`);
    const seller = response.data;
    setUnreachableStatus(seller.unreachable_status || null);
  };
  loadSellerData();
}, [id]);

// ä¿å­˜æ™‚
const handleSave = async () => {
  await api.put(`/api/sellers/${id}`, {
    unreachable_status: unreachableStatus,
    // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  });
};
```

### 2. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆåŒæœŸ

```typescript
// backend/src/services/SellerSyncService.ts

// ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰èª­ã¿è¾¼ã¿
async syncFromSpreadsheet() {
  const rows = await this.sheetsService.getRows(SPREADSHEET_ID, 'Sheet1');
  
  for (const row of rows) {
    const seller = {
      // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
      unreachable_status: row[9] || null, // Jåˆ—ï¼ˆ10åˆ—ç›®ã€0å§‹ã¾ã‚Šï¼‰
    };
    
    await this.saveSeller(seller);
  }
}

// ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸æ›¸ãè¾¼ã¿
async syncToSpreadsheet(seller: Seller) {
  const row = [
    // ... æ—¢å­˜ã‚«ãƒ©ãƒ ï¼ˆA-Iåˆ—ï¼‰
    seller.unreachable_status || '', // Jåˆ—
    // ... ãã®ä»–ã®ã‚«ãƒ©ãƒ 
  ];
  
  await this.sheetsService.updateRow(SPREADSHEET_ID, 'Sheet1', rowIndex, row);
}
```

### 3. å£²ä¸»ãƒªã‚¹ãƒˆã§ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º

```typescript
// frontend/src/pages/PropertyListingsPage.tsx

function SellerRow({ seller }: { seller: Seller }) {
  const statuses = useSellerStatus(seller);

  return (
    <tr>
      <td>{seller.seller_number}</td>
      <td>{seller.name}</td>
      {/* ... ãã®ä»–ã®ã‚«ãƒ©ãƒ  ... */}
      <td>
        {statuses.length > 0 ? (
          <StatusBadges statuses={statuses} />
        ) : (
          <span>-</span>
        )}
      </td>
    </tr>
  );
}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### sellersãƒ†ãƒ¼ãƒ–ãƒ«ã®æ‹¡å¼µ

```sql
-- æ–°è¦ã‚«ãƒ©ãƒ ã®è¿½åŠ 
ALTER TABLE sellers
ADD COLUMN unreachable_status VARCHAR(20) NULL;

-- ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
COMMENT ON COLUMN sellers.unreachable_status IS 'ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: æœªå…¥åŠ›ï¼ˆNULLï¼‰ã€ä¸é€šã€é€šé›»OK';
```

### åˆ¶ç´„

- **å‹**: VARCHAR(20)
- **NULLè¨±å¯**: YES
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: NULL
- **å¯èƒ½ãªå€¤**: NULLï¼ˆæœªå…¥åŠ›ï¼‰ã€'ä¸é€š'ã€'é€šé›»OK'

---

## APIè¨­è¨ˆ

### å£²ä¸»æƒ…å ±ã®å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/sellers/:id`

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "seller_number": "AA13487",
  "name": "èµ¤ç”°ç›´ä¹‹",
  "next_call_date": "2026/1/27",
  "status": "è¿½å®¢ä¸­",
  "inquiry_date": "2026/1/15",
  "unreachable_status": null,
  ...
}
```

### å£²ä¸»æƒ…å ±ã®æ›´æ–°

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PUT /api/sellers/:id`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "unreachable_status": "ä¸é€š"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "seller": {
    "seller_number": "AA13487",
    "unreachable_status": "ä¸é€š",
    ...
  }
}
```

---

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```typescript
// frontend/src/utils/validation.ts

/**
 * ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’æ¤œè¨¼
 * @param value ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤
 * @returns æœ‰åŠ¹ãªå ´åˆtrueã€ç„¡åŠ¹ãªå ´åˆfalse
 */
export function validateUnreachableStatus(value: string | null): boolean {
  if (value === null || value === '') {
    return true; // æœªå…¥åŠ›ã¯è¨±å¯
  }
  
  const validValues = ['ä¸é€š', 'é€šé›»OK'];
  return validValues.includes(value);
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```typescript
// backend/src/validators/sellerValidator.ts

export function validateUnreachableStatus(value: string | null): boolean {
  if (value === null || value === '') {
    return true;
  }
  
  const validValues = ['ä¸é€š', 'é€šé›»OK'];
  return validValues.includes(value);
}
```

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 1. ç„¡åŠ¹ãªå€¤ã®å‡¦ç†

```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
const handleUnreachableStatusChange = (value: string) => {
  if (!validateUnreachableStatus(value)) {
    setError('ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ãŒç„¡åŠ¹ã§ã™');
    return;
  }
  setUnreachableStatus(value);
};
```

### 2. ä¿å­˜å¤±æ•—æ™‚ã®å‡¦ç†

```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
const handleSave = async () => {
  try {
    await api.put(`/api/sellers/${id}`, {
      unreachable_status: unreachableStatus,
    });
    setSuccessMessage('ä¿å­˜ã—ã¾ã—ãŸ');
  } catch (error) {
    setError('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
    console.error('Save error:', error);
  }
};
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ãƒ¡ãƒ¢åŒ–

```typescript
// useSellerStatusãƒ•ãƒƒã‚¯å†…ã§useMemoã‚’ä½¿ç”¨
return useMemo(() => {
  return calculateSellerStatus(seller);
}, [
  seller.next_call_date,
  seller.status,
  seller.inquiry_date,
  seller.unreachable_status, // æ–°è¦è¿½åŠ 
  // ... ãã®ä»–ã®ä¾å­˜é…åˆ—
]);
```

### 2. æ¡ä»¶ãƒã‚§ãƒƒã‚¯ã®æœ€é©åŒ–

```typescript
// æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã§ä¸è¦ãªè¨ˆç®—ã‚’é¿ã‘ã‚‹
export function isCallTodayUnstarted(seller: Seller, today: Date): boolean {
  // æœ€ã‚‚é »ç¹ã«å¤±æ•—ã™ã‚‹æ¡ä»¶ã‚’æœ€åˆã«ãƒã‚§ãƒƒã‚¯
  if (seller.unreachable_status && seller.unreachable_status.trim() !== '') {
    return false; // æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³
  }
  
  // ... ãã®ä»–ã®æ¡ä»¶ãƒã‚§ãƒƒã‚¯
}
```

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```typescript
// frontend/src/utils/sellerStatusUtils.test.ts

describe('isCallTodayUnstarted', () => {
  it('ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæœªå…¥åŠ›ã§ã€åéŸ¿æ—¥ä»˜ãŒ2026å¹´1æœˆ1æ—¥ä»¥é™ã®å ´åˆã€trueã‚’è¿”ã™', () => {
    const seller = {
      next_call_date: '2026/1/20',
      status: 'è¿½å®¢ä¸­',
      inquiry_date: '2026/1/15',
      unreachable_status: null,
      phone_person: null,
    };
    const today = new Date(2026, 0, 27);
    
    expect(isCallTodayUnstarted(seller, today)).toBe(true);
  });

  it('ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã€Œä¸é€šã€ã®å ´åˆã€falseã‚’è¿”ã™', () => {
    const seller = {
      next_call_date: '2026/1/20',
      status: 'è¿½å®¢ä¸­',
      inquiry_date: '2026/1/15',
      unreachable_status: 'ä¸é€š',
      phone_person: null,
    };
    const today = new Date(2026, 0, 27);
    
    expect(isCallTodayUnstarted(seller, today)).toBe(false);
  });

  it('åéŸ¿æ—¥ä»˜ãŒ2026å¹´1æœˆ1æ—¥ã‚ˆã‚Šå‰ã®å ´åˆã€falseã‚’è¿”ã™', () => {
    const seller = {
      next_call_date: '2026/1/20',
      status: 'è¿½å®¢ä¸­',
      inquiry_date: '2025/12/31',
      unreachable_status: null,
      phone_person: null,
    };
    const today = new Date(2026, 0, 27);
    
    expect(isCallTodayUnstarted(seller, today)).toBe(false);
  });
});
```

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ

```typescript
// frontend/src/pages/CallModePage.test.tsx

describe('CallModePage - ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰', () => {
  it('ä¸é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', async () => {
    const seller = {
      seller_number: 'AA13487',
      unreachable_status: null,
    };

    render(<CallModePage seller={seller} />);

    expect(screen.getByLabelText('æœªé¸æŠ')).toBeChecked();
    expect(screen.getByLabelText('ä¸é€š')).not.toBeChecked();
    expect(screen.getByLabelText('é€šé›»OK')).not.toBeChecked();
  });

  it('ä¸é€šã‚’é¸æŠã—ã¦ä¿å­˜ã§ãã‚‹', async () => {
    const seller = {
      seller_number: 'AA13487',
      unreachable_status: null,
    };

    render(<CallModePage seller={seller} />);

    fireEvent.click(screen.getByLabelText('ä¸é€š'));
    fireEvent.click(screen.getByText('ä¿å­˜'));

    await waitFor(() => {
      expect(screen.getByText('ä¿å­˜ã—ã¾ã—ãŸ')).toBeInTheDocument();
    });
  });
});
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 1. XSSå¯¾ç­–

```typescript
// ReactãŒè‡ªå‹•çš„ã«ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
<FormControlLabel 
  value="ä¸é€š" 
  control={<Radio />} 
  label="ä¸é€š" 
/>
```

### 2. SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–

```typescript
// ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªã‚’ä½¿ç”¨
await db.query(
  'UPDATE sellers SET unreachable_status = $1 WHERE seller_number = $2',
  [unreachableStatus, sellerNumber]
);
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

1. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   ```bash
   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   npm run migration:create add_unreachable_status_column
   
   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
   npm run migration:run
   ```

2. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤**
   ```bash
   cd frontend
   npm run build
   npm run deploy
   ```

3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤**
   ```bash
   cd backend
   npm run build
   npm run deploy
   ```

---

## ä¿å®ˆæ€§

### 1. æ–°ã—ã„é¸æŠè‚¢ã®è¿½åŠ 

å°†æ¥çš„ã«ã€Œä¸é€šã€ã€Œé€šé›»OKã€ä»¥å¤–ã®é¸æŠè‚¢ã‚’è¿½åŠ ã™ã‚‹å ´åˆï¼š

```typescript
// å®šæ•°ã¨ã—ã¦ç®¡ç†
const UNREACHABLE_STATUS_OPTIONS = [
  { value: '', label: 'æœªé¸æŠ' },
  { value: 'ä¸é€š', label: 'ä¸é€š' },
  { value: 'é€šé›»OK', label: 'é€šé›»OK' },
  // æ–°ã—ã„é¸æŠè‚¢ã‚’è¿½åŠ 
  { value: 'ç•™å®ˆé›»', label: 'ç•™å®ˆé›»' },
];

// UIã§ä½¿ç”¨
{UNREACHABLE_STATUS_OPTIONS.map((option) => (
  <FormControlLabel 
    key={option.value}
    value={option.value} 
    control={<Radio />} 
    label={option.label} 
  />
))}
```

### 2. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´

```typescript
// æ¡ä»¶ã‚’å®šæ•°ã¨ã—ã¦ç®¡ç†
const INQUIRY_DATE_CUTOFF = new Date(2026, 0, 1);

// é–¢æ•°å†…ã§ä½¿ç”¨
if (inquiryDate < INQUIRY_DATE_CUTOFF) {
  return false;
}
```

---

## ä»Šå¾Œã®æ‹¡å¼µ

### 1. ä¸é€šç†ç”±ã®è¨˜éŒ²

```typescript
// å°†æ¥çš„ã«å®Ÿè£…å¯èƒ½
interface Seller {
  unreachable_status: string | null;
  unreachable_reason: string | null; // ä¸é€šç†ç”±
  unreachable_date: string | null;   // ä¸é€šæ—¥æ™‚
}
```

### 2. ä¸é€šå±¥æ­´ã®ç®¡ç†

```typescript
// å°†æ¥çš„ã«å®Ÿè£…å¯èƒ½
interface UnreachableHistory {
  seller_number: string;
  status: string;
  reason: string;
  created_at: Date;
}
```

---

**ä½œæˆæ—¥**: 2026å¹´1æœˆ28æ—¥  
**æœ€çµ‚æ›´æ–°æ—¥**: 2026å¹´1æœˆ28æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… è¨­è¨ˆå®Œäº†

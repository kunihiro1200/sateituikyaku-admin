# Implementation Plan: 買主詳細ページ問合せ履歴ナビゲーション修正

## Overview

問合せ履歴テーブルの物件番号クリック時の遷移先を買主詳細ページに変更し、戻るボタンの動作を改善します。最小限の変更で要件を満たすことを目指します。

## Tasks

- [x] 1. InquiryHistoryTableコンポーネントの更新
  - `onPropertyClick` プロップを `onBuyerClick` に変更
  - 物件番号クリック時に買主番号を渡すように修正
  - 買主番号が存在しない場合はクリック不可にする
  - _Requirements: 1.1, 1.2, 1.4_

- [ ]* 1.1 InquiryHistoryTableのユニットテストを作成
  - 買主番号が存在する場合のクリック動作をテスト
  - 買主番号が存在しない場合のクリック不可をテスト
  - `onBuyerClick` コールバックが正しく呼ばれることをテスト
  - _Requirements: 1.1, 1.2, 1.4_

- [x] 2. BuyerDetailPageコンポーネントの更新
  - [x] 2.1 ナビゲーションハンドラーの変更
    - `handlePropertyClick` を `handleBuyerClick` に変更
    - 買主詳細ページへのナビゲーションロジックを実装
    - _Requirements: 1.1, 1.2_

  - [x] 2.2 戻るボタンの動作変更
    - 既存の戻るボタンの `onClick` を `navigate(-1)` に変更
    - 履歴がない場合のフォールバック処理を追加
    - `aria-label` 属性を追加してアクセシビリティを向上
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 3.1, 3.2, 3.4_

- [ ]* 2.3 BuyerDetailPageのユニットテストを作成
  - 戻るボタンのレンダリングをテスト
  - 戻るボタンクリック時の動作をテスト
  - `handleBuyerClick` のナビゲーション動作をテスト
  - _Requirements: 2.1, 2.2, 3.1, 3.2_

- [x] 3. Checkpoint - 動作確認
  - 問合せ履歴から買主詳細ページへの遷移を確認
  - 戻るボタンの動作を確認
  - 買主番号がない場合の動作を確認
  - ブラウザの戻るボタンとの整合性を確認

- [ ]* 4. 統合テストの作成
  - 問合せ履歴テーブルから買主詳細ページへの遷移フローをテスト
  - 戻るボタンで前のページに戻るフローをテスト
  - 複数回遷移した後の戻るボタンの動作をテスト
  - _Requirements: 1.1, 1.2, 2.1, 2.2, 3.1, 3.2, 3.3_

- [x] 5. Final checkpoint - すべてのテストが通ることを確認
  - すべてのテストが通ることを確認
  - 手動テストで動作を確認
  - ユーザーに質問があれば確認

## Notes

- タスクに `*` が付いているものはオプションで、コア機能の実装を優先する場合はスキップ可能
- 各タスクは特定の要件を参照しており、トレーサビリティを確保
- チェックポイントで段階的な検証を実施
- 既存のコンポーネント構造を最大限活用し、新規ファイルの追加は不要

# ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿åŒæœŸå¤±æ•—ã®é˜²æ­¢ç­–

**ä½œæˆæ—¥**: 2026å¹´1æœˆ28æ—¥  
**æœ€çµ‚æ›´æ–°æ—¥**: 2026å¹´1æœˆ30æ—¥  
**ç›®çš„**: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã®ã«åŒæœŸã§ããªã„å•é¡Œã‚’é˜²ã

---

## ğŸš¨ æœ€é‡è¦ï¼šã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã®å–å¾—å…ƒå®šç¾©

### ã€Œã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ã€ï¼ˆproperty_aboutï¼‰

**âš ï¸ çµ¶å¯¾ã«é–“é•ãˆãªã„ã“ã¨**:
- âŒ å€‹åˆ¥ç‰©ä»¶ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®athomeã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾— â† **é–“é•ã„**
- âœ… **ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼ˆâ—å†…è¦§å‰ä¼é”äº‹é …ï¼‰ã‹ã‚‰å–å¾—** â† **æ­£ã—ã„**

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ  | å–å¾—å…ƒ | åˆ—ä½ç½® | ãƒ˜ãƒƒãƒ€ãƒ¼å |
|-----------|------------------|--------|--------|-----------|
| **ã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦** | `property_about` | **ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ** | **BQåˆ—** | **â—å†…è¦§å‰ä¼é”äº‹é …** |

### ãã®ä»–ã®ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ  | å–å¾—å…ƒ | ã‚»ãƒ«ä½ç½®ï¼ˆç‰©ä»¶ç¨®åˆ¥ã”ã¨ï¼‰ |
|-----------|------------------|--------|------------------------|
| ãŠæ°—ã«å…¥ã‚Šæ–‡è¨€ | `favorite_comment` | å€‹åˆ¥ç‰©ä»¶ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®`athome`ã‚·ãƒ¼ãƒˆ | åœŸåœ°: B53, æˆ¸å»ºã¦: B142, ãƒãƒ³ã‚·ãƒ§ãƒ³: B150 |
| ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆ | `recommended_comments` | å€‹åˆ¥ç‰©ä»¶ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®`athome`ã‚·ãƒ¼ãƒˆ | åœŸåœ°: B63:L79, æˆ¸å»ºã¦: B152:L166, ãƒãƒ³ã‚·ãƒ§ãƒ³: B149:L163 |
| ãƒ‘ãƒãƒ©ãƒURL | `athome_data` | å€‹åˆ¥ç‰©ä»¶ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®`athome`ã‚·ãƒ¼ãƒˆ | å…¨ç¨®åˆ¥å…±é€š: N1 |

---

## ğŸ¯ å•é¡Œã®æœ¬è³ª

**å•é¡Œ**: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒç¢ºå®Ÿã«å­˜åœ¨ã™ã‚‹ã®ã«ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åŒæœŸã•ã‚Œã¦ã„ãªã„

**å½±éŸ¿**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å…¬é–‹ç‰©ä»¶ã‚µã‚¤ãƒˆã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ããªã„
- ç‰©ä»¶ã®é­…åŠ›ãŒä¼ã‚ã‚‰ãªã„
- ãƒ“ã‚¸ãƒã‚¹ã«æ‚ªå½±éŸ¿

---

## ğŸ” æ ¹æœ¬åŸå› 

### åŸå› 1: `EnhancedAutoSyncService`ãŒç©ºã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã„ãŸ

**å•é¡Œã®ã‚³ãƒ¼ãƒ‰**ï¼ˆä¿®æ­£å‰ï¼‰:
```typescript
// ä¸€æ™‚çš„ãªè§£æ±ºç­–: property_detailsã«ç©ºã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
const { error: insertError } = await this.supabase
  .from('property_details')
  .insert({
    property_number: propertyNumber,
    property_about: null,              // â† ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾—ã—ã¦ã„ãªã„
    recommended_comments: null,        // â† ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾—ã—ã¦ã„ãªã„
    athome_data: null,                 // â† ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾—ã—ã¦ã„ãªã„
    favorite_comment: null,            // â† ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾—ã—ã¦ã„ãªã„
  });
```

**ãªãœå•é¡Œãªã®ã‹**:
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãªã„
- ç©ºã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã ã‘
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ããªã„

### åŸå› 2: åŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®å•é¡Œ

**å•é¡Œ**:
- æ–°è¦ç‰©ä»¶ãŒ`property_listings`ã«è¿½åŠ ã•ã‚Œã‚‹
- `EnhancedAutoSyncService`ãŒå®Ÿè¡Œã•ã‚Œã‚‹
- ç©ºã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã‚‹
- ãã®å¾Œã€èª°ã‚‚ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãªã„

**çµæœ**:
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒæ°¸é ã«`null`ã®ã¾ã¾

---

## âœ… å®Ÿè£…ã—ãŸå¯¾ç­–

### å¯¾ç­–1: `EnhancedAutoSyncService`ã®ä¿®æ­£

**ä¿®æ­£å†…å®¹**: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

**ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰**:
```typescript
// ç‰©ä»¶æƒ…å ±ã‚’å–å¾—ï¼ˆç‰©ä»¶ç¨®åˆ¥ãŒå¿…è¦ï¼‰
const { data: property, error: propertyError } = await this.supabase
  .from('property_listings')
  .select('property_type')
  .eq('property_number', propertyNumber)
  .single();

if (propertyError || !property) {
  console.error(`âŒ ${propertyNumber}: Property not found in property_listings`);
  failed++;
  continue;
}

// AthomeSheetSyncServiceã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
// ï¼ˆãŠæ°—ã«å…¥ã‚Šæ–‡è¨€ã€ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆã€ãƒ‘ãƒãƒ©ãƒURLï¼‰
const { AthomeSheetSyncService } = await import('./AthomeSheetSyncService');
const athomeSheetSyncService = new AthomeSheetSyncService();

const syncSuccess = await athomeSheetSyncService.syncPropertyComments(
  propertyNumber,
  property.property_type as 'land' | 'detached_house' | 'apartment'
);

if (syncSuccess) {
  console.log(`âœ… ${propertyNumber}: Synced comments from spreadsheet`);
  synced++;
} else {
  console.error(`âŒ ${propertyNumber}: Failed to sync comments from spreadsheet`);
  failed++;
}

// ğŸš¨ é‡è¦: property_aboutã¯ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ã‹ã‚‰å–å¾—
// ï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ã§ã¯ãªã„ï¼‰
const { PropertyService } = await import('./PropertyService');
const propertyService = new PropertyService();
const propertyAbout = await propertyService.getPropertyAbout(propertyNumber);

if (propertyAbout) {
  await this.supabase
    .from('property_details')
    .update({ property_about: propertyAbout })
    .eq('property_number', propertyNumber);
  console.log(`âœ… ${propertyNumber}: Synced property_about from BQ column`);
}
```

**åŠ¹æœ**:
- âœ… æ–°è¦ç‰©ä»¶ãŒè¿½åŠ ã•ã‚ŒãŸã¨ãã€è‡ªå‹•çš„ã«ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
- âœ… ç©ºã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ãªã„
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã™ãã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
- âœ… **`property_about`ã¯ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ã‹ã‚‰å–å¾—**ï¼ˆ2026å¹´1æœˆ30æ—¥è¿½åŠ ï¼‰

### å¯¾ç­–2: `/complete`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è‡ªå‹•åŒæœŸ

**å®Ÿè£…å†…å®¹**: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®å ´åˆã€è‡ªå‹•çš„ã«åŒæœŸ

**ã‚³ãƒ¼ãƒ‰**:
```typescript
// ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒnullã®å ´åˆã€Athomeã‚·ãƒ¼ãƒˆã‹ã‚‰è‡ªå‹•åŒæœŸ
const needsSync = !details.favorite_comment && !details.recommended_comments;
if (needsSync) {
  console.log(`[Complete API] Comment data is null, syncing from Athome sheet...`);
  try {
    const athomeSheetSyncService = new AthomeSheetSyncService();
    const syncSuccess = await athomeSheetSyncService.syncPropertyComments(
      property.property_number,
      property.property_type as 'land' | 'detached_house' | 'apartment'
    );
    
    if (syncSuccess) {
      console.log(`[Complete API] Successfully synced comments from Athome sheet`);
      // åŒæœŸå¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—
      const updatedDetails = await propertyDetailsService.getPropertyDetails(property.property_number);
      return updatedDetails;
    }
  } catch (syncError: any) {
    console.error(`[Complete API] Error syncing comments:`, syncError.message);
  }
}
```

**åŠ¹æœ**:
- âœ… æ—¢å­˜ã®ç‰©ä»¶ã§ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®å ´åˆã€åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«è‡ªå‹•åŒæœŸ
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
- âœ… æ‰‹å‹•ã§åŒæœŸã™ã‚‹å¿…è¦ãŒãªã„

---

## ğŸ”„ åŒæœŸãƒ•ãƒ­ãƒ¼ï¼ˆä¿®æ­£å¾Œï¼‰

### ãƒ•ãƒ­ãƒ¼1: æ–°è¦ç‰©ä»¶è¿½åŠ æ™‚

```
1. æ–°è¦ç‰©ä»¶ãŒproperty_listingsã«è¿½åŠ ã•ã‚Œã‚‹
2. EnhancedAutoSyncServiceãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆ5åˆ†ã”ã¨ï¼‰
3. property_detailsã«ç‰©ä»¶ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’æ¤œå‡º
4. AthomeSheetSyncServiceã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
   - ãŠæ°—ã«å…¥ã‚Šæ–‡è¨€ï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
   - ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
   - ãƒ‘ãƒãƒ©ãƒURLï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
5. PropertyService.getPropertyAbout()ã‚’ä½¿ç”¨ã—ã¦property_aboutã‚’å–å¾—
   - ğŸš¨ ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼ˆâ—å†…è¦§å‰ä¼é”äº‹é …ï¼‰ã‹ã‚‰å–å¾—
6. property_detailsã«ä¿å­˜ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚ã‚Šï¼‰
7. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å…¬é–‹ç‰©ä»¶ã‚µã‚¤ãƒˆã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
```

### ãƒ•ãƒ­ãƒ¼2: æ—¢å­˜ç‰©ä»¶ã§ã‚³ãƒ¡ãƒ³ãƒˆãŒnullã®å ´åˆ

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¬é–‹ç‰©ä»¶è©³ç´°ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
2. /completeã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã‚‹
3. property_detailsã‚’ç¢ºèª â†’ ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒnull
4. AthomeSheetSyncServiceã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
5. PropertyService.getPropertyAbout()ã‚’ä½¿ç”¨ã—ã¦property_aboutã‚’å–å¾—
   - ğŸš¨ ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼ˆâ—å†…è¦§å‰ä¼é”äº‹é …ï¼‰ã‹ã‚‰å–å¾—
6. property_detailsã‚’æ›´æ–°ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚ã‚Šï¼‰
7. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
```

---

## ğŸ›¡ï¸ å¤šå±¤é˜²å¾¡æˆ¦ç•¥

### ç¬¬1å±¤: `EnhancedAutoSyncService`

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ–°è¦ç‰©ä»¶è¿½åŠ æ™‚ï¼ˆè‡ªå‹•ã€5åˆ†ã”ã¨ï¼‰  
**å½¹å‰²**: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ä¿å­˜  
**åŠ¹æœ**: æ–°è¦ç‰©ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒç¢ºå®Ÿã«åŒæœŸã•ã‚Œã‚‹  
**ãƒªãƒˆãƒ©ã‚¤**: 3å›ã¾ã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆ1ç§’é–“éš”ï¼‰

**åŒæœŸå†…å®¹**:
- `favorite_comment` - ãŠæ°—ã«å…¥ã‚Šæ–‡è¨€ï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
- `recommended_comments` - ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
- `athome_data` - ãƒ‘ãƒãƒ©ãƒURLï¼ˆathomeã‚·ãƒ¼ãƒˆã‹ã‚‰ï¼‰
- **`property_about` - ã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ï¼ˆç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ã‹ã‚‰ï¼‰** â† 2026å¹´1æœˆ30æ—¥è¿½åŠ 

### ç¬¬2å±¤: `/complete`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è‡ªå‹•åŒæœŸ

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: å…¬é–‹ç‰©ä»¶è©³ç´°ç”»é¢ã®åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ï¼ˆè‡ªå‹•ï¼‰  
**å½¹å‰²**: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®å ´åˆã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰å–å¾—  
**åŠ¹æœ**: æ—¢å­˜ç‰©ä»¶ã§ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®å ´åˆã‚‚è‡ªå‹•ä¿®æ­£  
**ãƒªãƒˆãƒ©ã‚¤**: 3å›ã¾ã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆ1ç§’é–“éš”ï¼‰

### ç¬¬3å±¤: æ‰‹å‹•åŒæœŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ âœ… å®Ÿè£…å®Œäº†

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ç®¡ç†è€…ãŒæ‰‹å‹•ã§å®Ÿè¡Œ  
**å½¹å‰²**: ç‰¹å®šã®ç‰©ä»¶ã¾ãŸã¯å…¨ç‰©ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å†åŒæœŸ  
**åŠ¹æœ**: å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®ç·Šæ€¥å¯¾å¿œ  
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- **å˜ä¸€ç‰©ä»¶**: `POST /api/admin/sync-comments/:propertyNumber`
- **ä¸€æ‹¬åŒæœŸ**: `POST /api/admin/sync-comments-batch` (body: `{ propertyNumbers: ['AA13453', 'AA12398'] }`)

**ä½¿ç”¨ä¾‹**:
```bash
# å˜ä¸€ç‰©ä»¶ã®åŒæœŸ
curl -X POST http://localhost:3000/api/admin/sync-comments/AA13453

# ä¸€æ‹¬åŒæœŸ
curl -X POST http://localhost:3000/api/admin/sync-comments-batch \
  -H "Content-Type: application/json" \
  -d '{"propertyNumbers": ["AA13453", "AA12398", "CC100"]}'
```

### ç¬¬4å±¤: å®šæœŸç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ âœ… å®Ÿè£…å®Œäº†

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: å®šæœŸçš„ã«å®Ÿè¡Œï¼ˆæ¨å¥¨: 1æ—¥1å›ï¼‰  
**å½¹å‰²**: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®ç‰©ä»¶ã‚’æ¤œå‡ºã—ã¦ã‚¢ãƒ©ãƒ¼ãƒˆ  
**åŠ¹æœ**: å•é¡Œã®æ—©æœŸç™ºè¦‹  
**å®Ÿè¡Œæ–¹æ³•**:
```bash
npx ts-node backend/monitor-comment-sync-status.ts
```

**ã‚¢ãƒ©ãƒ¼ãƒˆæ¡ä»¶**:
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒ`null`ã®ç‰©ä»¶ãŒ10ä»¶ä»¥ä¸Š
- åŒæœŸæˆåŠŸç‡ãŒ90%æœªæº€

---

## ğŸ“Š ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

### ç›£è¦–ã™ã¹ãæŒ‡æ¨™

1. **ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒnullã®ç‰©ä»¶æ•°**
   ```sql
   SELECT COUNT(*) 
   FROM property_details 
   WHERE favorite_comment IS NULL 
     AND recommended_comments IS NULL;
   ```

2. **åŒæœŸå¤±æ•—ç‡**
   - `EnhancedAutoSyncService`ã®ãƒ­ã‚°ã‚’ç¢ºèª
   - å¤±æ•—ã—ãŸç‰©ä»¶ã‚’ãƒªã‚¹ãƒˆåŒ–

3. **è‡ªå‹•åŒæœŸã®å®Ÿè¡Œå›æ•°**
   - `/complete`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§è‡ªå‹•åŒæœŸãŒå®Ÿè¡Œã•ã‚ŒãŸå›æ•°
   - é »ç¹ã«å®Ÿè¡Œã•ã‚Œã‚‹å ´åˆã¯ã€ç¬¬1å±¤ã«å•é¡ŒãŒã‚ã‚‹

### ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

**æ¡ä»¶1**: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒnullã®ç‰©ä»¶ãŒ10ä»¶ä»¥ä¸Š
- â†’ `EnhancedAutoSyncService`ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§

**æ¡ä»¶2**: åŒæœŸå¤±æ•—ç‡ãŒ10%ä»¥ä¸Š
- â†’ ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚„APIåˆ¶é™ã®å•é¡Œ

**æ¡ä»¶3**: è‡ªå‹•åŒæœŸãŒ1æ—¥ã«100å›ä»¥ä¸Šå®Ÿè¡Œã•ã‚Œã‚‹
- â†’ ç¬¬1å±¤ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ãªã„

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒåŒæœŸã•ã‚Œãªã„

**ç¢ºèªäº‹é …**:
1. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼Ÿ
   ```bash
   npx ts-node backend/get-aa13453-comments.ts
   ```

2. æ¥­å‹™ãƒªã‚¹ãƒˆã«ç‰©ä»¶ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼Ÿ
   ```bash
   npx ts-node backend/check-aa13453-in-gyomu-list.ts
   ```

3. ç‰©ä»¶ç¨®åˆ¥ãŒæ­£ã—ã„ã‹ï¼Ÿ
   ```sql
   SELECT property_number, property_type 
   FROM property_listings 
   WHERE property_number = 'AA13453';
   ```

4. **ã€Œã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ã€ãŒåŒæœŸã•ã‚Œãªã„å ´åˆ**:
   - ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼ˆâ—å†…è¦§å‰ä¼é”äº‹é …ï¼‰ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã‹ç¢ºèª
   - âŒ athomeã‚·ãƒ¼ãƒˆã‚’ç¢ºèªã—ã¦ã‚‚æ„å‘³ãŒãªã„ï¼ˆå–å¾—å…ƒãŒé•ã†ï¼‰

**è§£æ±ºç­–**:
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„ â†’ ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’æ›´æ–°
- æ¥­å‹™ãƒªã‚¹ãƒˆã«ç‰©ä»¶ãŒãªã„ â†’ æ¥­å‹™ãƒªã‚¹ãƒˆã«è¿½åŠ 
- ç‰©ä»¶ç¨®åˆ¥ãŒé–“é•ã£ã¦ã„ã‚‹ â†’ `property_listings`ã‚’æ›´æ–°
- **ã€Œã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ã€ãŒãªã„ â†’ ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ã‚’ç¢ºèª**

### å•é¡Œ2: åŒæœŸãŒé…ã„

**åŸå› **:
- Google Sheets APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ã‚µã‚¤ã‚ºãŒå¤§ãã„

**è§£æ±ºç­–**:
- ãƒãƒƒãƒå‡¦ç†ã®ã‚µã‚¤ã‚ºã‚’èª¿æ•´ï¼ˆç¾åœ¨: 10ä»¶/ãƒãƒƒãƒï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ï¼ˆç¾åœ¨: 5åˆ†é–“ï¼‰
- ä¸¦åˆ—å‡¦ç†ã‚’åˆ¶é™

### å•é¡Œ3: åŒæœŸã‚¨ãƒ©ãƒ¼ãŒé »ç™º

**åŸå› **:
- Google Sheets APIã®èªè¨¼ã‚¨ãƒ©ãƒ¼
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªã„

**è§£æ±ºç­–**:
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èªè¨¼æƒ…å ±ã‚’ç¢ºèª
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®å…±æœ‰è¨­å®šã‚’ç¢ºèª

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æ–°è¦ç‰©ä»¶è¿½åŠ æ™‚

- [ ] `property_listings`ã«ç‰©ä»¶ã‚’è¿½åŠ 
- [ ] æ¥­å‹™ãƒªã‚¹ãƒˆã«ç‰©ä»¶ã‚’è¿½åŠ ï¼ˆ`ã‚¹ãƒ—ã‚·URL`ã‚’è¨­å®šï¼‰
- [ ] å€‹åˆ¥ç‰©ä»¶ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®`athome`ã‚·ãƒ¼ãƒˆã«ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
  - ãŠæ°—ã«å…¥ã‚Šæ–‡è¨€
  - ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆ
  - ãƒ‘ãƒãƒ©ãƒURLï¼ˆN1ã‚»ãƒ«ï¼‰
- [ ] **ç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼ˆâ—å†…è¦§å‰ä¼é”äº‹é …ï¼‰ã«ã€Œã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ã€ã‚’å…¥åŠ›**
- [ ] `EnhancedAutoSyncService`ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆ5åˆ†ã”ã¨ï¼‰
- [ ] `property_details`ã«ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª

### æ—¢å­˜ç‰©ä»¶ã§ã‚³ãƒ¡ãƒ³ãƒˆãŒnullã®å ´åˆ

- [ ] å…¬é–‹ç‰©ä»¶è©³ç´°ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
- [ ] `/complete`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒè‡ªå‹•åŒæœŸã‚’å®Ÿè¡Œ
- [ ] `property_details`ã«ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
- [ ] æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ğŸ“ Kiroã¸ã®ä¼ãˆæ–¹

**ğŸ“– è©³ç´°ã‚¬ã‚¤ãƒ‰**: `KIRO_CALLOUT_GUIDE.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### åŸºæœ¬ã®å‘¼ã³ã‹ã‘ï¼ˆæ¨å¥¨ï¼‰

```
ã€ç‰©ä»¶ç•ªå·ã€‘ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒåŒæœŸã•ã‚Œã¦ã„ãªã„ã€‚
ã‚¹ãƒ—ã‚·ã«ã¯ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã€‚
COMMENT_SYNC_FAILURE_PREVENTION.mdã‚’å‚ç…§ã—ã¦å¯¾å¿œã—ã¦ã€‚
```

**ä¾‹**:
```
AA13453ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒåŒæœŸã•ã‚Œã¦ã„ãªã„ã€‚
ã‚¹ãƒ—ã‚·ã«ã¯ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã€‚
COMMENT_SYNC_FAILURE_PREVENTION.mdã‚’å‚ç…§ã—ã¦å¯¾å¿œã—ã¦ã€‚
```

### è¤‡æ•°ç‰©ä»¶ã®å ´åˆ

```
ä»¥ä¸‹ã®ç‰©ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒåŒæœŸã•ã‚Œã¦ã„ãªã„ã€‚
ã‚¹ãƒ—ã‚·ã«ã¯ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã€‚
COMMENT_SYNC_FAILURE_PREVENTION.mdã‚’å‚ç…§ã—ã¦ä¸€æ‹¬åŒæœŸã—ã¦ã€‚

ç‰©ä»¶ç•ªå·:
- AA13453
- AA12398
- CC100
```

### ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ãªå ´åˆ

```
ã€ç‰©ä»¶ç•ªå·ã€‘ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒåŒæœŸã•ã‚Œã¦ã„ãªã„ã€‚ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ã€‚
æ‰‹å‹•åŒæœŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¦ã€‚
```

### æœ€çŸ­ã®å‘¼ã³ã‹ã‘

```
ã€ç‰©ä»¶ç•ªå·ã€‘ã®ã‚³ãƒ¡ãƒ³ãƒˆåŒæœŸå¤±æ•—ã€‚
COMMENT_SYNC_FAILURE_PREVENTION.mdå‚ç…§ã€‚
```

---

## ğŸ¯ ã¾ã¨ã‚

### å®Ÿè£…ã—ãŸå¯¾ç­–

1. âœ… `EnhancedAutoSyncService`ã‚’ä¿®æ­£ï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼‰
2. âœ… `/complete`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«è‡ªå‹•åŒæœŸã‚’è¿½åŠ ï¼ˆã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒãƒƒãƒˆï¼‰
3. âœ… å¤šå±¤é˜²å¾¡æˆ¦ç•¥ã‚’å®Ÿè£…ï¼ˆç¬¬1å±¤ + ç¬¬2å±¤ï¼‰
4. âœ… **`property_about`ã®è‡ªå‹•åŒæœŸã‚’è¿½åŠ ï¼ˆç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ã‹ã‚‰ï¼‰**ï¼ˆ2026å¹´1æœˆ30æ—¥ï¼‰

### åŠ¹æœ

- âœ… æ–°è¦ç‰©ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒç¢ºå®Ÿã«åŒæœŸã•ã‚Œã‚‹
- âœ… æ—¢å­˜ç‰©ä»¶ã§ã‚³ãƒ¡ãƒ³ãƒˆãŒnullã®å ´åˆã‚‚è‡ªå‹•ä¿®æ­£ã•ã‚Œã‚‹
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¸¸ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
- âœ… **ã€Œã“ã¡ã‚‰ã®ç‰©ä»¶ã«ã¤ã„ã¦ã€ã‚‚è‡ªå‹•åŒæœŸã•ã‚Œã‚‹**

### ä»Šå¾Œã®æ”¹å–„

- [x] æ‰‹å‹•åŒæœŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®Ÿè£…ï¼ˆç¬¬3å±¤ï¼‰ âœ… å®Œäº†
- [x] å®šæœŸç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè£…ï¼ˆç¬¬4å±¤ï¼‰ âœ… å®Œäº†
- [x] åŒæœŸå¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ âœ… å®Œäº†
- [ ] Slackã‚¢ãƒ©ãƒ¼ãƒˆé€£æºï¼ˆç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰é€šçŸ¥ï¼‰
- [ ] åŒæœŸå¤±æ•—ã®è©³ç´°ãƒ­ã‚°è¨˜éŒ²ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®å¯è¦–åŒ–ï¼ˆåŒæœŸæˆåŠŸç‡ã€å¤±æ•—ç‰©ä»¶ãƒªã‚¹ãƒˆï¼‰

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2026å¹´1æœˆ30æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å¯¾ç­–å®Ÿè£…å®Œäº†
**æ›´æ–°å±¥æ­´**:
- 2026å¹´1æœˆ28æ—¥: åˆç‰ˆä½œæˆ
- 2026å¹´1æœˆ30æ—¥: `property_about`ã®å–å¾—å…ƒã‚’æ˜è¨˜ï¼ˆç‰©ä»¶ãƒªã‚¹ãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®BQåˆ—ï¼‰ã€Phase 4.7ã«è‡ªå‹•åŒæœŸã‚’è¿½åŠ 


---

## ğŸ“– ä½¿ç”¨æ–¹æ³•ã‚¬ã‚¤ãƒ‰

### 1. å®šæœŸç›£è¦–ï¼ˆæ¨å¥¨: æ¯æ—¥å®Ÿè¡Œï¼‰

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ
npx ts-node backend/monitor-comment-sync-status.ts

# æœ¬ç•ªç’°å¢ƒï¼ˆVercelã«ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œï¼‰
# Vercel Cronã‚¸ãƒ§ãƒ–ã¨ã—ã¦è¨­å®šã™ã‚‹ã“ã¨ã‚’æ¨å¥¨
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```
ğŸ” Monitoring comment sync status...

ğŸ“Š Total properties in property_details: 150

âš ï¸  Properties with null comments: 2

ğŸ“‹ List of properties with null comments:
  1. AA13453
     - favorite_comment: âŒ null
     - recommended_comments: âŒ null
     - property_about: âœ…

ğŸ“ˆ Sync success rate: 98.67%

âœ… All systems normal
```

### 2. æ‰‹å‹•åŒæœŸï¼ˆå•é¡Œç™ºç”Ÿæ™‚ï¼‰

#### å˜ä¸€ç‰©ä»¶ã®åŒæœŸ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ
curl -X POST http://localhost:3000/api/admin/sync-comments/AA13453

# æœ¬ç•ªç’°å¢ƒ
curl -X POST https://your-domain.vercel.app/api/admin/sync-comments/AA13453
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```json
{
  "success": true,
  "message": "Successfully synced comments for AA13453",
  "propertyNumber": "AA13453"
}
```

#### ä¸€æ‹¬åŒæœŸ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ
curl -X POST http://localhost:3000/api/admin/sync-comments-batch \
  -H "Content-Type: application/json" \
  -d '{"propertyNumbers": ["AA13453", "AA12398", "CC100"]}'

# æœ¬ç•ªç’°å¢ƒ
curl -X POST https://your-domain.vercel.app/api/admin/sync-comments-batch \
  -H "Content-Type: application/json" \
  -d '{"propertyNumbers": ["AA13453", "AA12398", "CC100"]}'
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```json
{
  "success": true,
  "message": "Synced 3/3 properties",
  "results": {
    "success": 3,
    "failed": 0,
    "details": [
      { "propertyNumber": "AA13453", "success": true },
      { "propertyNumber": "AA12398", "success": true },
      { "propertyNumber": "CC100", "success": true }
    ]
  }
}
```

### 3. è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã®å‹•ä½œç¢ºèª

```bash
# ãƒ­ã‚°ã‚’ç¢ºèª
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ
npm run dev

# æœ¬ç•ªç’°å¢ƒ
vercel logs
```

**æœŸå¾…ã•ã‚Œã‚‹ãƒ­ã‚°**:
```
[AthomeSheetSyncService] Syncing comments for AA13453 (land) - Attempt 1/3
[AthomeSheetSyncService] âŒ Attempt 1/3 failed for AA13453: Network error
[AthomeSheetSyncService] Retrying in 1000ms...
[AthomeSheetSyncService] Syncing comments for AA13453 (land) - Attempt 2/3
[AthomeSheetSyncService] âœ… Successfully synced comments for AA13453 (attempt 2)
```

---

## ğŸ”” ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆæ¨å¥¨ï¼‰

### Vercel Cronã‚¸ãƒ§ãƒ–ã®è¨­å®š

`vercel.json`ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```json
{
  "crons": [
    {
      "path": "/api/cron/monitor-comments",
      "schedule": "0 9 * * *"
    }
  ]
}
```

### ç›£è¦–ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä½œæˆ

`backend/api/cron/monitor-comments.ts`:

```typescript
import type { VercelRequest, VercelResponse } from '@vercel/node';
import { createClient } from '@supabase/supabase-js';

export default async function handler(req: VercelRequest, res: VercelResponse) {
  const supabase = createClient(
    process.env.SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_KEY!
  );

  // ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒnullã®ç‰©ä»¶ã‚’å–å¾—
  const { data: nullCommentProperties, error } = await supabase
    .from('property_details')
    .select('property_number')
    .or('favorite_comment.is.null,recommended_comments.is.null');

  if (error) {
    return res.status(500).json({ error: error.message });
  }

  const count = nullCommentProperties?.length || 0;

  // ã‚¢ãƒ©ãƒ¼ãƒˆæ¡ä»¶
  if (count >= 10) {
    // Slackã«é€šçŸ¥ï¼ˆå®Ÿè£…ä¾‹ï¼‰
    // await sendSlackAlert(`âš ï¸ ${count} properties have null comments`);
    
    return res.json({
      alert: true,
      message: `${count} properties need attention`,
      properties: nullCommentProperties
    });
  }

  return res.json({
    alert: false,
    message: 'All systems normal',
    count
  });
}
```

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2026å¹´1æœˆ28æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†

/* 印刷用スタイル */
@media print {
  /* ページ設定 */
  @page {
    size: A4;
    margin: 8mm 12mm 35mm 12mm; /* 余白を最適化（下部余白を拡大して署名用スペースを確保） */
  }

  /* 印刷時に非表示にする要素 */
  .no-print,
  header,
  nav,
  .MuiAppBar-root,
  .print-hide {
    display: none !important;
  }

  /* 背景色を保持 */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* コンテンツの上部余白 */
  body {
    padding-top: 0 !important;
    margin: 0 !important;
    font-size: 8pt !important;
  }

  html {
    margin: 0 !important;
  }

  /* 会社署名を印刷時に右下に配置 */
  .company-signature {
    position: fixed !important;
    bottom: 10mm !important;
    right: 12mm !important;
    left: auto !important;
    width: auto !important;
    max-width: 200px !important;
    border: none !important;
    padding: 2px !important;
    margin: 0 !important;
    background: white !important;
    box-shadow: none !important;
    page-break-inside: avoid !important;
    z-index: 999999 !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    transform: translateZ(0) !important;  /* ハードウェアアクセラレーションを強制 */
  }

  /* フォールバック署名（fixedが効かない場合） */
  .print-signature-fallback {
    display: block !important;
    position: absolute !important;
    bottom: 10mm !important;
    right: 12mm !important;
    width: auto !important;
    max-width: 200px !important;
    padding: 2px !important;
    margin: 0 !important;
    background: white !important;
    z-index: 999999 !important;
    page-break-inside: avoid !important;
  }

  .print-signature-fallback div {
    font-size: 5pt !important;
    line-height: 1.2 !important;
    color: #666 !important;
    white-space: nowrap !important;
  }

  /* 会社ロゴを印刷時に非表示 */
  .company-logo {
    display: none !important;
  }

  /* 会社情報テキスト */
  .company-info {
    font-size: 5pt !important;
    line-height: 1.2 !important;
    color: #666 !important;
    text-align: right !important;
    display: block !important;
    visibility: visible !important;
  }

  .company-info .MuiBox-root {
    margin-bottom: 0 !important;
    display: block !important;
    white-space: nowrap !important;
    visibility: visible !important;
  }

  .company-info span {
    font-size: 5pt !important;
    color: #666 !important;
    display: inline !important;
    visibility: visible !important;
  }

  /* コンテナ */
  .MuiContainer-root {
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
  }

  /* グリッドレイアウトを1カラムに */
  .MuiGrid-container {
    display: block !important;
    width: 100% !important;
  }

  .MuiGrid-item {
    max-width: 100% !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* 左カラム（物件情報）に下部余白を追加して署名と重ならないようにする */
  .MuiGrid-item:first-of-type {
    padding-bottom: 20mm !important;  /* 30mm → 20mm に縮小 */
  }

  /* お問い合わせフォームを非表示 */
  .MuiGrid-item.no-print {
    display: none !important;
  }

  /* Paper要素 */
  .MuiPaper-root {
    box-shadow: none !important;
    border: 1px solid #ddd !important;
    margin-bottom: 2px !important;  /* 4px → 2px に縮小 */
    padding: 4px !important;  /* 6px → 4px に縮小 */
    background: white !important;
  }

  /* 特定のセクションのみ改ページを防ぐ */
  .favorite-comment-container,
  .recommended-comment-section,
  .athome-section {
    page-break-inside: avoid !important;
  }

  /* お気に入り文言（吹き出し） */
  .favorite-comment-container {
    margin-bottom: 4px !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .favorite-comment-bubble {
    background: #FFF9E6 !important;
    border: 2px solid #FFC107 !important;
    border-radius: 4px !important;
    padding: 6px !important;
    font-size: 8pt !important;
    line-height: 1.3 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .favorite-comment-icon {
    display: inline-block !important;
    vertical-align: middle !important;
    margin-right: 4px !important;
    color: #FFC107 !important;
    font-size: 12pt !important;
  }

  .favorite-comment-content {
    display: inline !important;
    font-weight: bold !important;
    color: #000 !important;
  }

  /* 画像ギャラリー */
  .MuiImageList-root {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 2px !important;
    margin: 3px 0 !important;
    width: 100% !important;
    max-height: 120mm !important;  /* 画像ギャラリーの最大高さを制限 */
  }

  .MuiImageListItem-root {
    break-inside: avoid;
    width: 100% !important;
    aspect-ratio: 16/9 !important;  /* 4/3から16/9に変更してより横長に */
    position: relative !important;
    overflow: hidden !important;
    max-height: 30mm !important;  /* 各画像の最大高さを制限 */
  }

  .MuiImageListItem-root img,
  .property-gallery-image {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center !important;
    display: block !important;
    border: 1px solid #ddd !important;
  }

  /* 画像を最大8枚まで表示 */
  .MuiImageListItem-root:nth-child(n+9) {
    display: none !important;
  }

  /* ボタンを非表示 */
  .MuiButton-root,
  .MuiIconButton-root {
    display: none !important;
  }

  /* タイポグラフィ */
  .MuiTypography-h4 {
    font-size: 12pt !important;
    margin-bottom: 4px !important;
    font-weight: bold !important;
  }

  .MuiTypography-h6 {
    font-size: 9pt !important;
    margin-bottom: 3px !important;
    font-weight: bold !important;
  }

  .MuiTypography-body1,
  .MuiTypography-body2 {
    font-size: 8pt !important;
    line-height: 1.3 !important;
  }

  /* Chip */
  .MuiChip-root {
    border: 1px solid #333 !important;
    background: white !important;
    font-size: 7pt !important;
    height: 18px !important;
    padding: 2px 4px !important;
  }

  /* Divider */
  .MuiDivider-root {
    margin: 4px 0 !important;
    border-color: #ddd !important;
  }

  /* おすすめコメントセクション */
  .recommended-comment-section {
    page-break-inside: avoid;
    margin-bottom: 4px !important;
    background: #FFF9E6 !important;
    border-left: 3px solid #FFC107 !important;
    padding: 6px !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .recommended-comment-section * {
    color: #000 !important;
    font-size: 8pt !important;
    line-height: 1.3 !important;
  }

  /* アピールポイントセクション */
  .athome-section {
    page-break-inside: avoid;
    margin-bottom: 4px !important;
    background: white !important;
    border: 1px solid #ddd !important;
    padding: 6px !important;
  }

  .athome-section * {
    color: #000 !important;
    font-size: 8pt !important;
    line-height: 1.3 !important;
  }

  /* リスト */
  ul, ol {
    margin: 0 !important;
    padding-left: 12px !important;
  }

  li {
    margin-bottom: 1px !important;
    line-height: 1.3 !important;
    font-size: 8pt !important;
  }

  /* 改ページ制御 */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }

  /* リンクのURL表示を無効化 */
  a[href]:after {
    content: none !important;
  }

  /* Box要素の余白調整 */
  .MuiBox-root {
    padding: 0 !important;
  }

  /* 会社署名のBoxは余白を保持 */
  .company-signature .MuiBox-root {
    padding: 2px !important;
  }

  /* Grid要素の余白調整 */
  .MuiGrid-root {
    margin: 0 !important;
  }

  /* Alert要素 */
  .MuiAlert-root {
    border: 1px solid #333 !important;
    padding: 8px !important;
    font-size: 10pt !important;
  }

  /* 物件詳細情報のグリッド */
  .MuiGrid-container.MuiGrid-spacing-xs-2 {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 2px !important;  /* 4px → 2px に縮小 */
    margin: 0 !important;
    padding: 0 !important;
  }

  /* 物件詳細情報の各グリッドアイテム */
  .MuiGrid-container.MuiGrid-spacing-xs-2 > .MuiGrid-item {
    padding: 2px !important;  /* 余白を最小限に */
    margin: 0 !important;
  }

  /* 物件詳細情報内のTypography */
  .MuiGrid-container.MuiGrid-spacing-xs-2 .MuiTypography-root {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.2 !important;
  }

  /* 改ページを防ぐ */
  .favorite-comment-container,
  .recommended-comment-section,
  .athome-section {
    page-break-inside: avoid !important;
  }

  /* 会社署名を確実に表示 */
  .company-signature,
  .company-signature * {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  .company-info span {
    display: inline !important;
  }
}

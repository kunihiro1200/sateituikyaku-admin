<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç‰©ä»¶ã‚¿ã‚¤ãƒ—ãƒãƒƒã‚¸è¡¨ç¤ºè¨ºæ–­ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: 'Noto Sans JP', sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .diagnostic-panel {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      color: #2563EB;
      margin-top: 0;
    }
    .result {
      padding: 10px;
      margin: 10px 0;
      border-left: 4px solid #2563EB;
      background: #f0f9ff;
    }
    .error {
      border-left-color: #EF4444;
      background: #fef2f2;
    }
    .success {
      border-left-color: #10B981;
      background: #f0fdf4;
    }
    .warning {
      border-left-color: #F59E0B;
      background: #fffbeb;
    }
    button {
      background: #2563EB;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
    }
    button:hover {
      background: #1D4ED8;
    }
    pre {
      background: #1f2937;
      color: #f9fafb;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 12px;
    }
    .badge-preview {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 12px;
      font-weight: 600;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>ğŸ” ç‰©ä»¶ã‚¿ã‚¤ãƒ—ãƒãƒƒã‚¸è¡¨ç¤ºè¨ºæ–­ãƒ„ãƒ¼ãƒ«</h1>
  
  <div class="diagnostic-panel">
    <h2>ğŸ“‹ è¨ºæ–­æ‰‹é †</h2>
    <p>1. <strong>localhost:5173/public/properties</strong> ã‚’é–‹ã„ã¦ãã ã•ã„</p>
    <p>2. ã“ã®ãƒšãƒ¼ã‚¸ã‚’åˆ¥ã‚¿ãƒ–ã§é–‹ã„ãŸã¾ã¾ã€ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>
    <p>3. è¨ºæ–­çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„</p>
    <button onclick="runDiagnostics()">ğŸš€ è¨ºæ–­ã‚’å®Ÿè¡Œ</button>
    <button onclick="location.reload()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
  </div>

  <div id="results"></div>

  <script>
    function addResult(title, content, type = 'result') {
      const resultsDiv = document.getElementById('results');
      const panel = document.createElement('div');
      panel.className = 'diagnostic-panel';
      panel.innerHTML = `
        <h2>${title}</h2>
        <div class="${type}">${content}</div>
      `;
      resultsDiv.appendChild(panel);
    }

    function runDiagnostics() {
      document.getElementById('results').innerHTML = '';
      
      // Check 1: Badge elements exist
      addResult('âœ… Step 1: ãƒãƒƒã‚¸è¦ç´ ã®å­˜åœ¨ç¢ºèª', `
        <p>ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:</p>
        <pre>document.querySelectorAll('.property-type-badge').length</pre>
        <p><strong>æœŸå¾…å€¤:</strong> ç‰©ä»¶æ•°ã¨åŒã˜æ•°ï¼ˆä¾‹: 10ä»¶ãªã‚‰10ï¼‰</p>
        <p><strong>0ã®å ´åˆ:</strong> ãƒãƒƒã‚¸è¦ç´ ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å•é¡Œï¼‰</p>
      `);

      // Check 2: Computed styles
      addResult('ğŸ¨ Step 2: ãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«ç¢ºèª', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:</p>
        <pre>
const badge = document.querySelector('.property-type-badge');
if (badge) {
  const styles = window.getComputedStyle(badge);
  console.log({
    display: styles.display,
    visibility: styles.visibility,
    opacity: styles.opacity,
    position: styles.position,
    zIndex: styles.zIndex,
    top: styles.top,
    left: styles.left,
    width: styles.width,
    height: styles.height,
    backgroundColor: styles.backgroundColor,
    color: styles.color
  });
}
        </pre>
        <p><strong>ç¢ºèªãƒã‚¤ãƒ³ãƒˆ:</strong></p>
        <ul>
          <li>display: "none" â†’ ãƒãƒƒã‚¸ãŒéè¡¨ç¤º</li>
          <li>visibility: "hidden" â†’ ãƒãƒƒã‚¸ãŒéè¡¨ç¤º</li>
          <li>opacity: "0" â†’ ãƒãƒƒã‚¸ãŒé€æ˜</li>
          <li>width/height: "0px" â†’ ãƒãƒƒã‚¸ã®ã‚µã‚¤ã‚ºãŒã‚¼ãƒ­</li>
          <li>zIndex: è² ã®å€¤ â†’ ä»–ã®è¦ç´ ã®ä¸‹ã«éš ã‚Œã¦ã„ã‚‹</li>
        </ul>
      `);

      // Check 3: Parent container
      addResult('ğŸ“¦ Step 3: è¦ªã‚³ãƒ³ãƒ†ãƒŠã®ç¢ºèª', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:</p>
        <pre>
const container = document.querySelector('.property-card-image-container');
if (container) {
  const styles = window.getComputedStyle(container);
  console.log({
    position: styles.position,
    overflow: styles.overflow,
    zIndex: styles.zIndex,
    width: styles.width,
    height: styles.height
  });
}
        </pre>
        <p><strong>ç¢ºèªãƒã‚¤ãƒ³ãƒˆ:</strong></p>
        <ul>
          <li>position: "relative" ã§ãªã„ â†’ absoluteé…ç½®ãŒåŠ¹ã‹ãªã„</li>
          <li>overflow: "hidden" â†’ ãƒãƒƒã‚¸ãŒåˆ‡ã‚Šå–ã‚‰ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§</li>
        </ul>
      `);

      // Check 4: Overlay z-index
      addResult('ğŸ” Step 4: ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®z-indexç¢ºèª', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:</p>
        <pre>
const overlay = document.querySelector('.property-card-image-overlay');
if (overlay) {
  const styles = window.getComputedStyle(overlay);
  console.log({
    position: styles.position,
    zIndex: styles.zIndex,
    pointerEvents: styles.pointerEvents
  });
}
        </pre>
        <p><strong>å•é¡Œã®å¯èƒ½æ€§:</strong></p>
        <ul>
          <li>ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®z-indexãŒãƒãƒƒã‚¸ã‚ˆã‚Šå¤§ãã„ â†’ ãƒãƒƒã‚¸ãŒéš ã‚Œã¦ã„ã‚‹</li>
          <li>ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒãƒãƒƒã‚¸ã‚’è¦†ã£ã¦ã„ã‚‹</li>
        </ul>
      `);

      // Check 5: MUI Chip styles
      addResult('ğŸ’ Step 5: MUI Chipã®ã‚¹ã‚¿ã‚¤ãƒ«ç¢ºèª', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:</p>
        <pre>
const badge = document.querySelector('.property-type-badge');
if (badge) {
  console.log('Badge classes:', badge.className);
  console.log('Badge inline styles:', badge.style.cssText);
  console.log('Badge parent:', badge.parentElement.className);
}
        </pre>
        <p><strong>ç¢ºèªãƒã‚¤ãƒ³ãƒˆ:</strong></p>
        <ul>
          <li>MUI-Chip-root ã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã™ã‚‹ã‹</li>
          <li>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ãŒæ­£ã—ãé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹</li>
        </ul>
      `);

      // Check 6: Visual test
      addResult('ğŸ‘ï¸ Step 6: è¦–è¦šçš„ãƒ†ã‚¹ãƒˆ', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãƒãƒƒã‚¸ã‚’å¼·åˆ¶è¡¨ç¤º:</p>
        <pre>
document.querySelectorAll('.property-type-badge').forEach(badge => {
  badge.style.cssText = \`
    position: absolute !important;
    top: 16px !important;
    left: 16px !important;
    z-index: 9999 !important;
    background-color: red !important;
    color: white !important;
    padding: 8px 16px !important;
    border-radius: 9999px !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    display: inline-flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  \`;
});
        </pre>
        <p><strong>çµæœ:</strong></p>
        <ul>
          <li>âœ… èµ¤ã„ãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ â†’ CSS specificity ã®å•é¡Œ</li>
          <li>âŒ è¡¨ç¤ºã•ã‚Œãªã„ â†’ DOMæ§‹é€ ã¾ãŸã¯JavaScriptã®å•é¡Œ</li>
        </ul>
      `);

      // Check 7: CSS specificity
      addResult('ğŸ¯ Step 7: CSSè©³ç´°åº¦ã®ç¢ºèª', `
        <p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œ:</p>
        <pre>
const badge = document.querySelector('.property-type-badge');
if (badge) {
  const allRules = [];
  for (let sheet of document.styleSheets) {
    try {
      for (let rule of sheet.cssRules) {
        if (rule.selectorText && badge.matches(rule.selectorText)) {
          allRules.push({
            selector: rule.selectorText,
            styles: rule.style.cssText
          });
        }
      }
    } catch(e) {}
  }
  console.table(allRules);
}
        </pre>
        <p><strong>ç¢ºèª:</strong> ã©ã®CSSãƒ«ãƒ¼ãƒ«ãŒãƒãƒƒã‚¸ã«é©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹</p>
      `);

      // Solution suggestions
      addResult('ğŸ’¡ è§£æ±ºç­–ã®ææ¡ˆ', `
        <h3>å•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ã®è§£æ±ºç­–:</h3>
        
        <h4>1ï¸âƒ£ z-indexã®å•é¡Œ</h4>
        <p>ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒãƒãƒƒã‚¸ã‚’è¦†ã£ã¦ã„ã‚‹å ´åˆ:</p>
        <pre>
.property-type-badge {
  z-index: 10 !important;
}
.property-card-image-overlay {
  z-index: 1 !important;
}
        </pre>

        <h4>2ï¸âƒ£ MUI Chipã®ã‚¹ã‚¿ã‚¤ãƒ«ä¸Šæ›¸ã</h4>
        <p>MUIã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ãŒå•é¡Œã®å ´åˆ:</p>
        <pre>
.property-card-image-container .MuiChip-root.property-type-badge {
  position: absolute !important;
  display: inline-flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}
        </pre>

        <h4>3ï¸âƒ£ è¦ªè¦ç´ ã®overflow</h4>
        <p>ãƒãƒƒã‚¸ãŒåˆ‡ã‚Šå–ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆ:</p>
        <pre>
.property-card-image-container {
  overflow: visible !important;
}
        </pre>

        <h4>4ï¸âƒ£ ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ã®å•é¡Œ</h4>
        <p>absoluteé…ç½®ãŒåŠ¹ã‹ãªã„å ´åˆ:</p>
        <pre>
.property-card-image-container {
  position: relative !important;
}
        </pre>
      `, 'success');
    }
  </script>
</body>
</html>
